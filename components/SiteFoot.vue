<template>
    <div class="bg-black">
        <div class="site-max">
            <footer ref="sf" class="sf relative bg-yellow pt-35 s:pt-80 px-20 s:px-80 overflow-hidden">
                <div class="flex flex-col s:flex-row s:flex-wrap">
                    <div class="w-full mb-30 s:mb-75">
                        <svg class="h-[3rem] s:h-[6.1rem] w-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 332 61">
                            <g fill="#000" fill-rule="evenodd">
                                <path
                                    d="M193.77 1.317a9.881 9.881 0 0 0-4.31.793c-2.074.89-4.587 4.62-5.56 8.259-1.84 6.85-7.553 35.276-7.837 38.986-.427 5.613.587 8.546 3.388 9.778 1.044.458 2.547.68 3.34.487 4.238-1.005 8.858-4.84 10.97-9.096.76-1.529 2.604-7.744 5.672-9.992 3.61-2.643 9.586-5.512 13.073-2.705 2.967 2.384.461 10.22.363 11.528-.432 5.613.582 8.546 3.384 9.778 1.042.458 2.546.68 3.34.487 4.242-1.005 8.862-4.84 10.974-9.096 2.51-5.067 9.639-38.143 8.99-41.714-1.056-5.797-7.655-9.126-13.29-6.7-2.075.89-4.588 4.62-5.566 8.259-.46 1.72-3.093 6.95-6.14 8.74-2.732 1.61-6.814 2.762-9.414.953-3.52-2.447-2.769-7.435-3.438-12.521-.575-4.386-3.656-6.04-7.94-6.224M4.659 58.067c-5.283-2.331-5.623-8.583-.502-30.75C6.477 17.267 8.91 9.875 10.91 7.933 15.6.64 23.182-1.281 28.93 8.435c2.682 3.712 8.194 16.945 10.797 17.241 4.966.564 7.528-14.565 13.972-19.576 8.138-6.55 13.115 3.099 12.06 12.162-.677 5.547-1.828 11.503-3.142 16.299-2.178 7.94-5.01 16.61-6.244 19.091-6.288 9.297-14.14 5.212-15.767.1-2.994-7.367-13.245-19.765-19-16.519-7.912 3.132-6.1 25.173-16.946 20.834M137.836 58.752c-6.042-.943-10.934-4.66-11.718-8.905-.743-4.043 1.957-6.344 9.767-8.333 5.652-1.44 7.426-2.774 7.426-5.571 0-1.483-.633-2.62-2.883-5.146-5.155-5.785-6.157-10.084-3.64-15.584 2.818-6.153 8.347-10.492 15.925-12.502 4.194-1.11 7.698-1.093 11.545.047 6.482 1.926 9.57 4.824 9.57 8.988 0 3.777-2.788 5.606-8.558 5.614-2.511.004-3.307.568-3.307 2.343 0 .284 1.244 1.917 2.763 3.63 1.524 1.708 3.497 4.36 4.384 5.893 1.429 2.482 1.61 3.333 1.606 7.674-.01 6.11-1.274 9.188-5.508 13.39-6.617 6.566-17.654 9.977-27.372 8.462M122.089 13.876c7.665 12.104 2.501 29.359-11.532 38.54-14.036 9.177-31.623 6.807-39.292-5.296-7.664-12.1-2.502-29.355 11.534-38.536 14.035-9.18 31.626-6.807 39.29 5.292M260.82.761a9.881 9.881 0 0 0-4.308.794c-2.074.89-4.584 4.62-5.561 8.257-1.84 6.85-7.549 35.278-7.833 38.987-.427 5.576.575 8.504 3.332 9.748 1.481.902 3.63 1.42 6.608 1.625 3.651.255 17.328-.166 24.258-1.023 3.68-.456 7.671-2.44 8.838-4.399 3.179-5.32.9-12.442-4.587-14.346-2.197-.76-17.662 5.15-19.938-.285-3.133-2.585 7.735-22.592 7.004-32.165-.337-4.41-3.53-7.01-7.812-7.193" />
                                <path
                                    d="M287.604.001c-2.201.046-4.575 1.17-6.78 4.353-6.018 11.936 21.578 23.198 21.04 30.344 1.446 2.71-8.715 13.524-9.487 15.103-1.623 4.11-3.048 10.091 2.407 11.014 4.029.581 8.284.285 15.944-8.361 8.013-9.8 9.192-11.963 16.935-27.426 6.756-14.89 3.461-23.662-1.245-23.928-7.845-.66-8.641 10.73-14.506 14.656-7.214 2.853-11.009-4.762-16.344-11.494-1.109-1.404-4.296-4.332-7.964-4.26" />
                            </g>
                        </svg>
                        <p class="text-16 s:text-30 w-full max-w-[18rem] s:max-w-[40rem] leading-[1.1] mt-20">
                            Connecting culinary creativity to the world.
                        </p>
                    </div>
                    <div class="w-full max-w-[60rem]">
                        <a href="mailto:info@noshly.com"
                            class="inline-flex flex-col items-start text-15 s:text-22 leading-[1.5]">
                            <span class="font-bold">Contact</span>
                            <span>info@noshly.com</span>
                        </a>
                        <div class="hidden flex-col items-start mt-20 s:mt-40">
                            <span class="font-bold text-15 s:text-22 leading-[1.5]">Connect</span>
                            <nav class="flex gap-x-8 s:gap-x-15 pt-15">
                                <SocialItem icon="twitter" />
                                <SocialItem icon="instagram" />
                            </nav>
                        </div>
                    </div>
                    <nav class="hidden s:flex flex-col items-start">
                        <a class="group font-2 uppercase text-33 uline-double mb-20">
                            <span class="has-hover:group-hover:hidden">For chefs</span>
                            <span class="has-hover:group-hover:block hidden">Coming soon</span>
                        </a>
                        <a class="group font-2 uppercase text-33 uline-double">
                            <span class="has-hover:group-hover:hidden">For eaters</span>
                            <span class="has-hover:group-hover:block hidden">Coming soon</span>
                        </a>
                    </nav>
                </div>
                <p class="flex flex-col items-start text-13 s:text-18 leading-[1.8] opacity-[.25] pt-30 s:pt-75 pb-25">
                    Noshly, Copyright 2023. All rights reserved.
                    <a href="https://www.griflan.com/" class="" target="_blank" rel="noreferrer">Design: Griflan</a>
                </p>
                <div ref="eye" class="absolute top-0 right-0 w-[60%] s:w-[45%] translate-x-[30%] translate-y-[-20%]">
                    <div class="pt-[100%]"></div>
                    <div ref="eye1" class="absolute inset-0">
                        <img src="/eye-1.svg" class="absolute top-0 right-0 h-full w-full object-contain">
                    </div>
                    <div ref="eye2" class="absolute top-[40%] right-0 w-[37.5%] h-[37.5%]">
                        <img src="/eye-2.svg"
                            class="absolute top-0 right-0 h-full w-full object-contain -translate-x-1/2 -translate-y-1/2">
                    </div>
                </div>
            </footer>
        </div>
    </div>
</template>

<script>
import gsap from 'gsap'

import { rect } from '~/assets/js/utils/common'

export default {

    async mounted() {
        await this.$nextTick()

        this.$nextTick(() => {
            this.resize()

            this.$el.addEventListener('mousemove', this.move)
            this.$nuxt.$on('resize', this.resize)
        })
    },

    destroyed() {
        this.$el.removeEventListener('mousemove', this.move)
        this.$nuxt.$off('resize', this.resize)
    },

    methods: {

        move({ clientX, pageY }) {
            this.x(clientX)
            this.y(pageY)

            this.x2(clientX)
            this.y2(pageY)
        },

        resize() {
            this.rect = rect(this.$refs.sf)

            const { left, top, width, height } = this.rect
            const settings = { duration: 1, ease: 'expo' }

            this.x = gsap.utils.pipe(
                gsap.utils.mapRange(left, left + width, -5, 0),
                gsap.quickTo(this.$refs.eye1, 'xPercent', settings),
            )

            this.y = gsap.utils.pipe(
                gsap.utils.mapRange(top, top + height, -2, 7.5),
                gsap.quickTo(this.$refs.eye1, 'yPercent', settings)
            )

            this.x2 = gsap.utils.pipe(
                gsap.utils.mapRange(left, left + width, -30, 5),
                gsap.quickTo(this.$refs.eye2, 'xPercent', settings),
            )

            this.y2 = gsap.utils.pipe(
                gsap.utils.mapRange(top, top + height, -15, 30),
                gsap.quickTo(this.$refs.eye2, 'yPercent', settings)
            )
        },
    }
}
</script>

<style lang="scss" scoped>
.sf {
    --clip-x: 0%;
    --clip-y: 0%;
    --round: 6rem;

    @screen s {
        --round: 9rem;
    }

    clip-path: inset(var(--clip-y) var(--clip-x) 0 round var(--round) var(--round) 0 0);
}
</style>